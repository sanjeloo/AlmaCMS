@using AlmaCMS.Helpers;
@{
    ViewBag.Title = "میزکار";
    Layout = "~/Areas/Manage/Views/Shared/_LayoutAdmin.cshtml";

  var CustomeProducList=  ViewBag.CustomeProducList as List<AlmaCMS.Models.CustomProduct>;
  var TasksList = ViewBag.TasksList as List<AlmaCMS.Models.VWTaskList>;
     var Products=ViewBag.Products as List<AlmaCMS.Models.Product>;
   var LastShortMessages= ViewBag.LastShortMessages as List<AlmaCMS.Models.UsersShortMessage>;
   var MemberList= ViewBag.MemberList as List<AlmaCMS.Models.AspNetUser>;
  var ExpertList=  ViewBag.ExpertList  as List<AlmaCMS.Models.AspNetUser>;

  var ProductReportList = ViewBag.ProductReportList as List<AlmaCMS.Models.VWProducReport>;
}


<h1 class="page-title">به سیستم مدیریت محتوای نیووب خوش آمدید</h1>
<ol class="breadcrumb breadcrumb-2">
    <li class="active"><strong>برای مدیریت بخش های مختلف وب سایت از منوی کناری استفاده نمایید.</strong></li>
</ol>

<div class="row">
    <div class="col-lg-3 col-sm-6">
        <div class="panel minimal secondary-bg">
            <div class="panel-body">
                <h2 class="no-margins"><strong>@MemberList.Count</strong></h2>
                <p>تعداد کاربران </p>
                <div class="float-chart-sm pt-15">
                    <div id="online-signup" class="flot-chart-content" style="padding: 0px; position: relative;"><canvas class="flot-base" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 190px; height: 70px;" width="190" height="70"></canvas><div class="flot-text" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; font-size: smaller; color: rgb(84, 84, 84);"><div class="flot-x-axis flot-x1-axis xAxis x1Axis" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; display: block;"><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 5px; text-align: center;">J</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 81px; text-align: center;">J</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 96px; text-align: center;">J</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 20px; text-align: center;">F</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 34px; text-align: center;">M</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 65px; text-align: center;">M</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 50px; text-align: center;">A</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 111px; text-align: center;">A</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 126px; text-align: center;">S</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 140px; text-align: center;">O</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 156px; text-align: center;">N</div><div style="position: absolute; max-width: 14px; top: 57px; font: bold 11px/13px &quot;Source Sans Pro&quot;, sans-serif; color: rgb(214, 216, 219); left: 171px; text-align: center;">D</div></div></div><canvas class="flot-overlay" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 190px; height: 70px;" width="190" height="70"></canvas></div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-3 col-sm-6">
        <div class="panel minimal primary-bg">
            <div class="panel-body">
                <h2 class="no-margins"><strong>@ExpertList.Count</strong></h2>
                <p>تعداد کارشناسان</p>
            </div>
            <div class="float-chart-sm">
                <div class="last-month-outer">
                    <div id="last-month-sale" class="flot-chart-content" style="position: relative;">@*<svg height="85" version="1.1" width="233" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; left: -0.75px; top: -0.800003px;"><desc>Created with Raphaël 2.1.2</desc><defs></defs><path style="fill-opacity: 1;" fill="#b7b5d6" stroke="none" d="M0,42.5C11.696638158493313,45.535714285714285,35.08991447547994,59.954153858598936,46.78655263397325,54.642857142857146C58.48849058320444,49.329153858598936,81.89236648166681,-0.7629020194465219,93.594304430898,0C105.17434719315804,0.7549551234106205,128.33443271767808,59.9551834352418,139.91447547993812,60.714285714285715C151.48921845146026,61.473040578098946,174.6387043945046,6.4489052282265655,186.21344736602674,6.071428571428569C197.91008552452007,5.689976656797994,221.30336184150667,44.776785714285715,233,57.67857142857143L233,85L0,85Z" fill-opacity="1"></path><path style="" fill="none" stroke="#7e7ac3" d="M0,42.5C11.696638158493313,45.535714285714285,35.08991447547994,59.954153858598936,46.78655263397325,54.642857142857146C58.48849058320444,49.329153858598936,81.89236648166681,-0.7629020194465219,93.594304430898,0C105.17434719315804,0.7549551234106205,128.33443271767808,59.9551834352418,139.91447547993812,60.714285714285715C151.48921845146026,61.473040578098946,174.6387043945046,6.4489052282265655,186.21344736602674,6.071428571428569C197.91008552452007,5.689976656797994,221.30336184150667,44.776785714285715,233,57.67857142857143" stroke-width="1"></path><circle cx="0" cy="42.5" r="0" fill="#7e7ac3" stroke="#ffffff" style="" stroke-width="1"></circle><circle cx="46.78655263397325" cy="54.642857142857146" r="0" fill="#7e7ac3" stroke="#ffffff" style="" stroke-width="1"></circle><circle cx="93.594304430898" cy="0" r="0" fill="#7e7ac3" stroke="#ffffff" style="" stroke-width="1"></circle><circle cx="139.91447547993812" cy="60.714285714285715" r="0" fill="#7e7ac3" stroke="#ffffff" style="" stroke-width="1"></circle><circle cx="186.21344736602674" cy="6.071428571428569" r="0" fill="#7e7ac3" stroke="#ffffff" style="" stroke-width="1"></circle><circle cx="233" cy="57.67857142857143" r="0" fill="#7e7ac3" stroke="#ffffff" style="" stroke-width="1"></circle></svg>*@<div class="morris-hover morris-default-style" style="display: none;"></div></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 col-sm-6">
        <div class="panel minimal info-bg">
            <div class="panel-body">
                <h2 class="no-margins"><strong>@ProductReportList.Count</strong></h2>
                <p>گزارشات محصول ثبت شده</p>
                <div class="float-chart-sm pt-15">
                    <div id="total-revenue" class="flot-chart-content" style="padding: 0px; position: relative;"><canvas class="flot-base" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 190px; height: 70px;" width="190" height="70"></canvas><canvas class="flot-overlay" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 190px; height: 70px;" width="190" height="70"></canvas></div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-3 col-sm-6">
        <div class="panel minimal teal-bg">
            <div class="panel-body" style="padding-bottom:43px;">
                <h2 class="no-margins"><strong>@ViewBag.PaymentCount</strong></h2>
                <p>تعداد وظایف</p>
                <div class="mini-progress">
                    <div class="progress-media">
                        <div class="progress-label">
                            <small>
                               تعدا کل : @TasksList.Where(c => c.StatusId != 4).Count()
                            </small>
                        </div>
                        
                    </div>
                    <div class="progress-media">
                        <div class="progress-label">
                            <small>انجام شده : @TasksList.Where(c => c.StatusId == 3).Count()</small>
                        </div>
                        <div class="progress-label">
                            <small>انجام نشده : @TasksList.Where(c => c.StatusId == 1 || c.StatusId == 2).Count()</small>
                        </div>
                        @*<div class="progress-wrap">
                            <div class="progress sm-progress">
                                @if (ViewBag.PaymentCount > 0)
                                {
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="@ViewBag.Unsuccess" aria-valuemin="0" aria-valuemax="@ViewBag.PaymentCount" style="width:@(ViewBag.Unsuccess * 100 / ViewBag.PaymentCount)%">
                                        <span class="sr-only">ناموفق : @ViewBag.Unsuccess</span>
                                    </div>
                                }
                                else
                                {
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="@ViewBag.Unsuccess" aria-valuemin="0" aria-valuemax="@ViewBag.PaymentCount" style="width:0%">
                                        <span class="sr-only">ناموفق : @ViewBag.Unsuccess</span>
                                    </div>
                                }

                            </div>
                        </div>*@
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading no-border clearfix">
                <h4 class="panel-title">تعدادکل سفارشات</h4>
                <ul class="panel-tool-options">
                    <li><a href="/manage/manageorders" data-rel="reload"><i class="icon-arrows-ccw icon-2x"></i></a></li>
                </ul>
            </div>
            <div class="panel-body" style="padding-bottom:42px !important">
                <div class="morris-chart">
                    <div id="morris-donut-chart">
                        @*<svg height="342" version="1.1" width="433" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; top: -0.666626px;"><desc>Created with Raphaël 2.1.2</desc><defs></defs><path style="opacity: 0;" fill="none" stroke="#036eff" d="M216.5,282.5A109,109,0,0,0,266.2282007686757,76.50460810785763" stroke-width="2" opacity="0"></path><path style="" fill="#036eff" stroke="#ffffff" d="M216.5,285.5A112,112,0,0,0,267.5968668448778,73.83501016587206L288.81119102601014,32.45624206509575A158.5,158.5,0,0,1,216.5,332Z" stroke-width="3"></path><path style="opacity: 1;" fill="none" stroke="#4bc0c0" d="M266.2282007686757,76.50460810785763A109,109,0,0,0,111.68486011097343,143.58701870351615" stroke-width="2" opacity="1"></path><path style="" fill="#4bc0c0" stroke="#ffffff" d="M267.5968668448778,73.83501016587206A112,112,0,0,0,108.80003974705527,142.76372564031018L59.27729016646015,128.63052805527423A163.5,163.5,0,0,1,291.09230115301364,28.00691216178646Z" stroke-width="3"></path><path style="opacity: 0;" fill="none" stroke="#fa3b63" d="M111.68486011097343,143.58701870351615A109,109,0,0,0,216.46575664063917,282.49999462106564" stroke-width="2" opacity="0"></path><path style="" fill="#fa3b63" stroke="#ffffff" d="M108.80003974705527,142.76372564031018A112,112,0,0,0,216.4648141628586,285.4999944730216L216.4502057572597,331.9999921783386A158.5,158.5,0,0,1,64.08532410632375,130.00268316061752Z" stroke-width="3"></path><text style="text-anchor: middle; font: 800 15px &quot;Arial&quot;;" x="216.5" y="163.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" font-size="15px" font-weight="800" transform="matrix(2.4773,0,0,2.4773,-320.5682,-257.7841)" stroke-width="0.4036697247706422"><tspan dy="6">Bounce</tspan></text><text style="text-anchor: middle; font: 14px &quot;Arial&quot;;" x="216.5" y="183.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" font-size="14px" transform="matrix(2.2708,0,0,2.2708,-275.7708,-223.0313)" stroke-width="0.4403669724770642"><tspan dy="5">1,260</tspan></text></svg>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading clearfix">
                <h4 class="panel-title">Pie Chart Example</h4>
                <ul class="panel-tool-options">
                    <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#" aria-expanded="false"><i class="icon-cog"></i></a>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li><a href="#"><i class="icon-arrows-ccw"></i> Update data</a></li>
                            <li><a href="#"><i class="icon-list"></i> Detailed log</a></li>
                            <li><a href="#"><i class="icon-chart-pie"></i> Statistics</a></li>
                            <li class="divider"></li>
                            <li><a href="#"><i class="icon-cancel"></i> Clear list</a></li>
                        </ul>
                    </li>
                    <li><a data-rel="collapse" href="#"><i class="icon-down-open"></i></a></li>
                    <li><a data-rel="reload" href="#"><i class="icon-arrows-ccw"></i></a></li>
                    <li><a data-rel="close" href="#"><i class="icon-cancel"></i></a></li>
                </ul>
            </div>
            <!-- panel body -->
            <div class="panel-body">
                <div class="canvas-chart">
                    <canvas id="pieChart" style="width: 433px; height: 202px;" width="433" height="202"></canvas>
                </div>
            </div>
        </div>
    </div>    
</div>
<div class="row">
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading clearfix">
                <h4 class="panel-title">آخرین نظرات برای محصولات</h4>
            </div>
            <div class="panel-body">
                <ul class="list-item message-list">
                    @*@LoadProductReview()*@
                </ul>

                <div class="more">
                    <a href="/AdminShop/ManageProductReview" class="btn btn-sm btn-primary">نمایش همه</a>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading clearfix">
                <h4 class="panel-title">آخرین نظرات برای مقالات</h4>
            </div>
            <div class="panel-body">
                <ul class="list-item message-list">
                    @*@LoadArticletReview()*@
                </ul>
                <div class="more">
                    <a href="/AdminShop/ManageArticleReview" class="btn btn-sm btn-primary">نمایش همه</a>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading clearfix">
                <h4 class="panel-title">پیام های سایت</h4>
            </div>
            <div class="panel-body">
                <ul class="list-item message-list">
                    @*@LoadSiteMessage()*@
                </ul>
                <div class="more">
                    <a href="/AdminShop/ManageSiteMessage" class="btn btn-sm btn-primary">نمایش همه</a>
                </div>
            </div>
        </div>
    </div>
</div>

@{
    if (ViewBag.suspend == "true")
    {
        ViewBag.suspend = "";
        AlmaCMS.Areas.Manage.Controllers.AdminController.locked = false;
        <script src="~/Scripts/jquery-1.10.2.min.js"></script>
        <script>
            $(document).ready(function () {
                //$('#myModal').fadeIn(300);
                $('#btn-modal').click();
                $('#dialog-modal').css({ 'display': 'block' });
                $('#dialog-modal').stop(false).animate({ 'opacity': '1.0', 'top': '35%' }, 300);
            });
            $(document).click(function () {
                $('#dialog-modal').hide();
            });
        </script>
        <div id="btn-modal" data-toggle="modal" data-target="#myModal"></div>
        <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel">
            @*<div class="modal-dialog" role="document">*@

            @*</div>*@
        </div>
        <div style="
                        position:absolute !important;
                        width: 250px;
                        height: 90px;
                        background: #fff;
                        top:20% !important;
                        left: 35%;
                        margin: auto;
                        z-index: 10000;
                        display:block;
                        opacity:1.0;
                        text-align:center;
                        border-radius: 3px;
                        " id="dialog-modal">
            <span class="fa fa-warning fa-2x" style=" position:relative;
                        top: 15px; color: #a75849;"></span>
            <p style="font-family: IRANSans;
         font-size: 16px; position:relative; top: 18px; text-align:center; color: #a75849;">دسترسی غیر مجاز</p>
        </div>
    }
}

@section scripts{
<script src="/Areas/Manage/Content/plugins/chartjs/js/Chart.min.js"></script>
<script src="~/Areas/Manage/Content/plugins/chartjs/js/chartjs-script.js"></script>


<script>
    $(function () {






        var pieChartData = [
            {
                value:@TasksList.Where(c=>c.StatusId==3).Count(),
                color: "#ffce56",
                highlight: "#eebd45",
                label: "وطایف انجام شده"
            },
            {
                value: @TasksList.Where(c=>c.StatusId==1).Count(),
                color: "#ff6384",
                highlight: "#ef5374",
                label: "تعریف شده"
            },
            {
                value: @TasksList.Where(c=>c.StatusId==2).Count(),
                color: "#036eff",
                highlight: "#4c44e5",
                label: "در حال انجام"
            },
        
           
        ];

        var pieChartOptions = {
            segmentShowStroke: true,
            segmentStrokeColor: "#fff",
            segmentStrokeWidth: 2,
            percentageInnerCutout: 45, // This is 0 for Pie charts
            animationSteps: 100,
            animationEasing: "easeOutBounce",
            animateRotate: true,
            animateScale: false,
            responsive: true,
        };


        var ctx = document.getElementById("pieChart").getContext("2d");
        var pieChart = new Chart(ctx).Doughnut(pieChartData, pieChartOptions);




    });
    </script>
}