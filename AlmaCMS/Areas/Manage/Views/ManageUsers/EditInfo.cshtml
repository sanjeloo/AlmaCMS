@model AlmaCMS.ViewModels.VMUserInfo
@{
    ViewBag.Title = "تکمیل اطلاعات";
    Layout = "~/Areas/Manage/Views/Shared/_LayoutAdmin.cshtml";
}
@section Styles{

    <style>
        .shcartbank {
            text-align: left;
            letter-spacing: 2px;
            font-family: IranSansEN;
        }

        .irshebabox {
            position: relative;
        }

        .irshebainput {
            padding-left: 45px !important;
            text-align: left;
            letter-spacing: 2px;
            font-family: IranSansEN;
        }

        .irsheba {
            position: absolute;
            top: 1px;
            left: 1px;
            background-color: #ffffdf;
            padding: 9px 12px;
            border-radius: 3px 0px 0px 3px;
            box-shadow: 0px 0px 2px 0px rgba(0, 0, 0,0.5);
        }
    </style>
}
<div class="tg-dashboardbanner">
    <h1>تکمیل اطلاعات</h1>
    <ol class="tg-breadcrumb">
        <li><a href="/">صفحه اصلی</a></li>
        <li><a href="/Profile">داشبورد</a></li>
        <li class="tg-active">حساب کاربری</li>
    </ol>
</div>
<main id="tg-main" class="tg-main tg-haslayout">
    <section class="tg-dbsectionspace tg-haslayout">
        <div class="row">
            <div class="tg-formtheme tg-formdashboard">
                @using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()
                    @Html.HiddenFor(model => model.UserID)

    @Html.HiddenFor(model => model.id, new { @value ="0"} )
                    <fieldset>
                        <div class="tg-dashboardbox">
                            <div class="col-xs-12 tg-lgcolwidthhalf" style="margin-bottom:0px;">
                                <div class="tg-dashboardboxtitle">
                                    <h2> اطلاعات شخصی </h2>
                                </div>
                                <div class="tg-dashboardholder" style="padding-bottom:0px;">
                                    <div class="col-sm-12">
                                        <div class="alert alert-info" style="padding:5px 15px;">
                                            <ul>
                                                <li>
                                                    جهت سهولت و تسریع در نقل و انتقال وجوه ترجیحا از حساب <b style="color:#ff0000">بانک ملت</b> استفاده نمایید.
                                                </li>
                                                <li>
                                                    در صورت استفاده از حساب های دیگر بانک ها انتقال وجه از طریق حواله پایا و یا ساتنا انجام میگیرد که فقط در ساعات اداری و روزهای غیر تعطیل انتقال انجام می شود.
                                                </li>
                                                <li>
                                                    انتقال وجه به حساب های غیر بانک ملت حداکثر 24 ساعت به طول خواهد انجامید.
                                                </li>
                                                <li>
                                                    خرید یا فروش ارز دیجیتال فقط با حساب بانکی وارد شده به نام کاربر  انجام گیرد در غیر این صورت مبلغ عودت میگردد.
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="alert alert-info" style="padding:5px 15px;">
                                            <ul>
                                                <li>
                                                    پس از تائید اطلاعات و مدارک هویتی شما، امکان ویرایش اطلاعات و مدارک فقط از طریق تماس با پشتیبانی قابل انجام خواهد بود.
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control", @placeholder = "نام و نام خانوادگی" } })
                                            @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <input type="email" name="Email" class="form-control" placeholder="ایمیل" value="@ViewBag.currentEmail" disabled>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            @Html.EditorFor(model => model.NickName, new { htmlAttributes = new { @class = "form-control", @placeholder = "نام کاربری" } })
                                            @Html.ValidationMessageFor(model => model.NickName, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            @Html.EditorFor(model => model.NationalCode, new { htmlAttributes = new { @class = "form-control NumberOnlyWithLenth", @placeholder = "کد ملی", @validation = "10" } })
                                            @Html.ValidationMessageFor(model => model.NationalCode, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            @Html.EditorFor(model => model.BankName, new { htmlAttributes = new { @class = "form-control", @placeholder = "نام بانک ( بانک های عضو شتاب )" } })
                                            @Html.ValidationMessageFor(model => model.BankName, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            @Html.EditorFor(model => model.BankCartNo, new { htmlAttributes = new { @class = "form-control shcartbank NumberOnlyWithLenth", @placeholder = "شماره کارت بانکی ", @validation = "16" } })
                                            @Html.ValidationMessageFor(model => model.BankCartNo, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group irshebabox">
                                            @Html.EditorFor(model => model.ShabaNumbe, new { htmlAttributes = new { @class = "form-control irshebainput NumberOnlyWithLenth", @placeholder = "شماره شبا IR ", @validation = "25" } })
                                            @Html.ValidationMessageFor(model => model.ShabaNumbe, "", new { @class = "text-danger" })
                                            <span class="irsheba">IR</span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            @Html.EditorFor(model => model.StaticPhone, new { htmlAttributes = new { @class = "form-control  NumberOnly", @placeholder = "تلفن ثابت  با پیش شماره" } })
                                            @Html.ValidationMessageFor(model => model.StaticPhone, "", new { @class = "text-danger" })

                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="col-xs-12">
                                    <div class="col-sm-12 tg-dashboardholder" style="padding-top:0px !important">
                                    <hr />
                                        <div class="alert alert-info" style="padding:5px 15px;">
                                            <p><b>کاربر گرامی : </b> نظر به دستورالعمل <b style="color:green">پلیس فتا</b> مبنی بر تائید هویت تمامی کاربران ، خواهشمندیم تصویر سلفی خود را با توجه به نکات زیر در این فرم بارگذاری نمائید.</p>
                                            <ul>
                                                <li>
                                                    عکس سلفی واضح کاربر به همراه کارت ملی و کارت بانکی هم نام با اطلاعات پروفایل  مطابق نمونه آپلود شود.
                                                </li>
                                                <li>
                                                    در تصویر سلفی لازم است شماره 16 رقمی کارت و نام و نام خانوادگی شما و اطلاعات کارت ملی شما به خوبی مشخص باشد.
                                                </li>
                                                <li>
                                                    حتماً شماره سه رقمی CVV و همینطور تاریخ انقضای کارت را با کاغذ یا پس از تهیه سلفی با ویرایش فایل بپوشانید
                                                </li>
                                                <li>
                                                    حجم فایل مربوطه لازم است حداقل 1MB و حداکثر 5MB باشد
                                                </li>
                                                <li>
                                                    فرمت آن فقط می تواند از نوع JPG، BMP یا PNG باشد.
                                                </li>
                                                <li>از همکاری و شکیبایی شما در این رابطه کمال تشکر را داریم.</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 tg-lgcolwidthhalf">
                                        <div class="tg-dashboardboxtitle">
                                            <h2>عکس سلفی ( بارگذاری تصویر کارت ملی و کارت بانکی مطابق نمونه ) </h2>
                                        </div>

                                        <div class="col-sm-8">
                                            <div class="tg-dashboardholder">
                                                <label class="tg-fileuploadlabel" for="FluBankCartPhoto">
                                                    <div class="tg-adstatus tg-adstatusinactive" style="width:110px;border:solid 1px #ccc;"> <i class="fa fa-upload"></i> آپلود تصویر</div>
                                                    <span>حداکثر اندازه فایل : 5 مگابایت</span>
                                                    <input id="FluBankCartPhoto" class="tg-fileinput" type="file">
                                                </label>
                                                <div class="tg-horizontalthemescrollbar tg-profilephotogallery">
                                                    <div id="UploadedFiles">
                                                        <div current-data="" class="ImageBox pull-right" id="">
                                                            <figure>
                                                                <img id="ImgBankCartPhoto" style="border:solid 1px #ccc;" class="img-responsive" src="@(string.IsNullOrEmpty(Model.BankCartPhoto) ? "/Content/Images/no-image.png" :"/uploadedFiles/"+ Model.BankCartPhoto)">
                                                                @Html.HiddenFor(model => model.BankCartPhoto)
                                                            </figure>
                                                        </div>
                                                        <img src="~/Content/images/content_Loading-Loop-1.gif" id="LoadingImgCartBank" class="pull-left" width="100" style="display:none" />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <img src="~/Content/images/exselfie.jpg" />
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 tg-lgcolwidthhalf">
                                        <div class="col-xs-12 tg-dashboardboxtitle">
                                            <h2>بارگذاری تصویر کارت ملی و کارت بانکی مطابق نمونه</h2>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="tg-dashboardholder">
                                                <label class="tg-fileuploadlabel" for="FluCartMelii">
                                                    <div class="tg-adstatus tg-adstatusinactive" style="width:110px;border:solid 1px #ccc;"> <i class="fa fa-upload"></i> آپلود تصویر</div>
                                                    <span>حداکثر اندازه فایل : 5 مگابایت</span>
                                                    <input id="FluCartMelii" class="tg-fileinput" type="file" name="">
                                                </label>
                                                <div class="tg-horizontalthemescrollbar tg-profilephotogallery">
                                                    <div id="UploadedFiles">
                                                        <div current-data="" class="ImageBox pull-right" id="">
                                                            <figure>
                                                                <img id="ImgNationalCartImage" style="border:solid 1px #ccc;" class="img-responsive" src="@(string.IsNullOrEmpty(Model.NationalCartImage) ? "/Content/Images/no-image.png" : "/uploadedFiles/"+Model.NationalCartImage)">
                                                                @Html.HiddenFor(model => model.NationalCartImage)

                                                            </figure>
                                                        </div>
                                                        <img src="~/Content/images/content_Loading-Loop-1.gif" id="LoadingImg_CartMelli" class="pull-left" width="100" style="display:none" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <img src="~/Content/images/samplevector.jpg" />
                                        </div>
                                    </div>
                                </div>
                        </div>
                            <div class="col-xs-12">
                                <div class="col-xs-12" style="margin-bottom:30px;">
                                    <button class="tg-btn tg-btnactionregister mt-30" type="submit"><i class="fa fa-check"></i> ثبت اطلاعات</button>
                                    <button class="tg-btn tg-cancel  mt-30" type="button"><i class="fa fa-times"></i> انصراف</button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                }
            </div>
        </div>
    </section>
</main>


@section Scripts
{
    <script>

        $('#FluCartMelii').on('change', function () {



            var data = new FormData();
            var files = $("#FluCartMelii").get(0).files;
            if (files.length > 0) {
                data.append("FluCartMelii", files[0]);
            }
            else {
                alertify.warning('لطفا یک فایل را انتخاب نمایید');
                return;

            }


            $("#LoadingImg").css('display', 'block');
            $('#BtnSubmit').attr('disabled', 'true');
            data.append("__RequestVerificationToken", $('input[name=__RequestVerificationToken]').val());
            $.ajax({
                type: "POST",
                url: "/Profile/UploadFile",//ارسال فایل به اکشن بارگذاری
                contentType: false,
                processData: false,
                data: data,
                error: function (xhr) {
                    console.log('Error: ' + xhr.statusText);

                    $("#LoadingImg_CartMelli").css('display', 'none');
                    ;

                },
                success: function (data) {
                    if (data.State == "true") {

                        $('#ImgNationalCartImage').attr('src', '/uploadedFiles/' + data.Filename);
                        $('#NationalCartImage').val(data.Filename);





                        $("#LoadingImg_CartMelli").css('display', 'none');

                    } else {



                        $("#LoadingImg").css('display', 'none');

                    }
                    $('#FluCartMelii').val('');


                    $("#LoadingImg_CartMelli").css('display', 'none');

                    $('#BtnSubmit').removeAttr('disabled');
                },
            });
        });

        $('#FluBankCartPhoto').on('change', function () {



            var data = new FormData();
            var files = $("#FluBankCartPhoto").get(0).files;
            if (files.length > 0) {
                data.append("FluBankCartPhoto", files[0]);
            }
            else {
                alertify.warning('لطفا یک فایل را انتخاب نمایید');
                return;

            }


            $("#LoadingImg").css('display', 'block');
            $('#BtnSubmit').attr('disabled', 'true');
            data.append("__RequestVerificationToken", $('input[name=__RequestVerificationToken]').val());
            $.ajax({
                type: "POST",
                url: "/Profile/UploadFile",//ارسال فایل به اکشن بارگذاری
                contentType: false,
                processData: false,
                data: data,
                error: function (xhr) {
                    console.log('Error: ' + xhr.statusText);

                    $("#LoadingImgCartBank").css('display', 'none');
                    ;

                },
                success: function (data) {
                    if (data.State == "true") {

                        $('#ImgBankCartPhoto').attr('src', '/uploadedFiles/' + data.Filename);
                        $('#BankCartPhoto').val(data.Filename);





                        $("#LoadingImgCartBank").css('display', 'none');

                    } else {



                        $("#LoadingImgCartBank").css('display', 'none');

                    }
                    $('#FluBankCartPhoto').val('');


                    $("#LoadingImgCartBank").css('display', 'none');

                    $('#BtnSubmit').removeAttr('disabled');
                },
            });
        });

        $(".NumberOnly").keypress(function (e) {
            //if the letter is not digit then display error and don't type anything
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                //display error message
                $("#errmsg").html("فقط عدد").show().fadeOut("slow");
                return false;
            }
        });

        $(".NumberOnlyWithLenth").keypress(function (e) {

            //if the letter is not digit then display error and don't type anything
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                //display error message


                return false;
            }
            if (e.which != 8 && e.which) {
                if ($(this).val().length >= parseInt($(this).attr('validation'))) {
                    return false;
                }
            }

        });
    </script>
}
